(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{764:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"startInputShims",(function(){return startInputShims}));var _helpers_46f4a262_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(47),cloneMap=new WeakMap,relocateInput=function(componentEl,inputEl,shouldRelocate,inputRelativeY){void 0===inputRelativeY&&(inputRelativeY=0),cloneMap.has(componentEl)!==shouldRelocate&&(shouldRelocate?addClone(componentEl,inputEl,inputRelativeY):removeClone(componentEl,inputEl))},isFocused=function(input){return input===input.getRootNode().activeElement},addClone=function(componentEl,inputEl,inputRelativeY){var parentEl=inputEl.parentNode,clonedEl=inputEl.cloneNode(!1);clonedEl.classList.add("cloned-input"),clonedEl.tabIndex=-1,parentEl.appendChild(clonedEl),cloneMap.set(componentEl,clonedEl);var tx="rtl"===componentEl.ownerDocument.dir?9999:-9999;componentEl.style.pointerEvents="none",inputEl.style.transform="translate3d("+tx+"px,"+inputRelativeY+"px,0) scale(0)"},removeClone=function(componentEl,inputEl){var clone=cloneMap.get(componentEl);clone&&(cloneMap.delete(componentEl),clone.remove()),componentEl.style.pointerEvents="",inputEl.style.transform=""},SKIP_SELECTOR="input, textarea, [no-blur]",calcScrollData=function(inputRect,contentRect,keyboardHeight,platformHeight){var inputTop=inputRect.top,inputBottom=inputRect.bottom,visibleAreaTop=contentRect.top,safeAreaTop=visibleAreaTop+15,distanceToBottom=.5*Math.min(contentRect.bottom,platformHeight-keyboardHeight)-inputBottom,distanceToTop=safeAreaTop-inputTop,desiredScrollAmount=Math.round(distanceToBottom<0?-distanceToBottom:distanceToTop>0?-distanceToTop:0),scrollAmount=Math.min(desiredScrollAmount,inputTop-visibleAreaTop),duration=Math.abs(scrollAmount)/.3;return{scrollAmount:scrollAmount,scrollDuration:Math.min(400,Math.max(150,duration)),scrollPadding:keyboardHeight,inputSafeY:4-(inputTop-safeAreaTop)}},jsSetFocus=function(componentEl,inputEl,contentEl,keyboardHeight){var scrollData=function(componentEl,contentEl,keyboardHeight){var itemEl=componentEl.closest("ion-item,[ion-item]")||componentEl;return calcScrollData(itemEl.getBoundingClientRect(),contentEl.getBoundingClientRect(),keyboardHeight,componentEl.ownerDocument.defaultView.innerHeight)}(componentEl,contentEl,keyboardHeight);Math.abs(scrollData.scrollAmount)<4?inputEl.focus():(relocateInput(componentEl,inputEl,!0,scrollData.inputSafeY),inputEl.focus(),contentEl.scrollByPoint(0,scrollData.scrollAmount,scrollData.scrollDuration).then((function(){relocateInput(componentEl,inputEl,!1,scrollData.inputSafeY),inputEl.focus()})))},hasPointerMoved=function(threshold,startCoord,endCoord){if(startCoord&&endCoord){var deltaX=startCoord.x-endCoord.x,deltaY=startCoord.y-endCoord.y;return deltaX*deltaX+deltaY*deltaY>threshold*threshold}return!1},setScrollPadding=function(input,keyboardHeight){if("INPUT"===input.tagName&&!(input.parentElement&&"ION-INPUT"===input.parentElement.tagName||input.parentElement&&input.parentElement.parentElement&&"ION-SEARCHBAR"===input.parentElement.parentElement.tagName)){var el=input.closest("ion-content");if(null!==el){var timer=el.$ionPaddingTimer;timer&&clearTimeout(timer),keyboardHeight>0?el.style.setProperty("--keyboard-offset",keyboardHeight+"px"):el.$ionPaddingTimer=setTimeout((function(){el.style.setProperty("--keyboard-offset","0px")}),120)}}},startInputShims=function(config){var doc=document,keyboardHeight=config.getNumber("keyboardHeight",290),scrollAssist=config.getBoolean("scrollAssist",!0),hideCaret=config.getBoolean("hideCaretOnScroll",!0),inputBlurring=config.getBoolean("inputBlurring",!0),scrollPadding=config.getBoolean("scrollPadding",!0),inputs=Array.from(doc.querySelectorAll("ion-input, ion-textarea")),hideCaretMap=new WeakMap,scrollAssistMap=new WeakMap,registerInput=function(componentEl){var inputEl=(componentEl.shadowRoot||componentEl).querySelector("input")||(componentEl.shadowRoot||componentEl).querySelector("textarea"),scrollEl=componentEl.closest("ion-content");if(inputEl){if(scrollEl&&hideCaret&&!hideCaretMap.has(componentEl)){var rmFn=function(componentEl,inputEl,scrollEl){if(!scrollEl||!inputEl)return function(){};var scrollHideCaret=function(shouldHideCaret){isFocused(inputEl)&&relocateInput(componentEl,inputEl,shouldHideCaret)},onBlur=function(){return relocateInput(componentEl,inputEl,!1)},hideCaret=function(){return scrollHideCaret(!0)},showCaret=function(){return scrollHideCaret(!1)};return scrollEl.addEventListener("ionScrollStart",hideCaret),scrollEl.addEventListener("ionScrollEnd",showCaret),inputEl.addEventListener("blur",onBlur),function(){scrollEl.removeEventListener("ionScrollStart",hideCaret),scrollEl.removeEventListener("ionScrollEnd",showCaret),inputEl.addEventListener("ionBlur",onBlur)}}(componentEl,inputEl,scrollEl);hideCaretMap.set(componentEl,rmFn)}if(scrollEl&&scrollAssist&&!scrollAssistMap.has(componentEl)){rmFn=function(componentEl,inputEl,contentEl,keyboardHeight){var coord,touchStart=function(ev){coord=Object(_helpers_46f4a262_js__WEBPACK_IMPORTED_MODULE_0__.j)(ev)},touchEnd=function(ev){if(coord){var endCoord=Object(_helpers_46f4a262_js__WEBPACK_IMPORTED_MODULE_0__.j)(ev);hasPointerMoved(6,coord,endCoord)||isFocused(inputEl)||(ev.preventDefault(),ev.stopPropagation(),jsSetFocus(componentEl,inputEl,contentEl,keyboardHeight))}};return componentEl.addEventListener("touchstart",touchStart,!0),componentEl.addEventListener("touchend",touchEnd,!0),function(){componentEl.removeEventListener("touchstart",touchStart,!0),componentEl.removeEventListener("touchend",touchEnd,!0)}}(componentEl,inputEl,scrollEl,keyboardHeight);scrollAssistMap.set(componentEl,rmFn)}}};inputBlurring&&function(){var focused=!0,didScroll=!1,doc=document,onScroll=function(){didScroll=!0},onFocusin=function(){focused=!0},onTouchend=function(ev){if(didScroll)didScroll=!1;else{var active=doc.activeElement;if(active&&!active.matches(SKIP_SELECTOR)){var tapped=ev.target;tapped!==active&&(tapped.matches(SKIP_SELECTOR)||tapped.closest(SKIP_SELECTOR)||(focused=!1,setTimeout((function(){focused||active.blur()}),50)))}}};doc.addEventListener("ionScrollStart",onScroll),doc.addEventListener("focusin",onFocusin,!0),doc.addEventListener("touchend",onTouchend,!1)}(),scrollPadding&&function(keyboardHeight){var doc=document,onFocusin=function(ev){setScrollPadding(ev.target,keyboardHeight)},onFocusout=function(ev){setScrollPadding(ev.target,0)};doc.addEventListener("focusin",onFocusin),doc.addEventListener("focusout",onFocusout)}(keyboardHeight);for(var _i=0,inputs_1=inputs;_i<inputs_1.length;_i++){var input=inputs_1[_i];registerInput(input)}doc.addEventListener("ionInputDidLoad",(function(ev){registerInput(ev.detail)})),doc.addEventListener("ionInputDidUnload",(function(ev){!function(componentEl){var fn;hideCaret&&((fn=hideCaretMap.get(componentEl))&&fn(),hideCaretMap.delete(componentEl));scrollAssist&&((fn=scrollAssistMap.get(componentEl))&&fn(),scrollAssistMap.delete(componentEl))}(ev.detail)}))}}}]);
//# sourceMappingURL=4.b51f01cd59879ff3cd07.bundle.js.map